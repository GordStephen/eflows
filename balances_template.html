<%namespace name="data" module="eflows.template_functions"/>
<table>
  <thead>
    <tr>
      <th>${year}</th>
      % for resource in data.resources():
      <th>${resource}</th>
      % endfor
      <th>Total</th>
    </tr>  
  </thead>
  <tbody>
    <tr>
      <th>Total Primary Energy Supply</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_from_node('Primary Production', resource, year) + data.resource_from_node('Imports', resource, year) - data.resource_into_node('Exports', resource, year) - data.resource_into_node('Bunkers', resource, year) + data.resource_from_node('Long-Term Stock Changes', resource, year) - data.resource_into_node('Long-Term Stock Changes', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_from_node('Primary Production', year) + data.total_from_node('Imports', year) - data.total_into_node('Exports', year) - data.total_into_node('Bunkers', year) + data.total_from_node('Long-Term Stock Changes', year) - data.total_into_node('Long-Term Stock Changes', year))}</td>
    </tr> 
    <tr>
      <th>Production</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_from_node('Primary Production', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_from_node('Primary Production', year))}</td>
    </tr> 
    <tr>
      <th>Imports</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_from_node('Imports', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_from_node('Imports', year))}</td>
    </tr> 
    <tr>
      <th>Exports</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_into_node('Exports', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_into_node('Exports', year))}</td>
    </tr> 
    <tr>
      <th>International Bunkers</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_into_node('Bunkers', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_into_node('Bunkers', year))}</td>
    </tr> 
    <tr>
      <th>Stock Changes</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_from_node('Long-Term Stock Changes', resource, year) - data.resource_into_node('Long-Term Stock Changes', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_from_node('Long-Term Stock Changes', year) - data.total_into_node('Long-Term Stock Changes', year))}</td>
    </tr> 

    <tr>
      <th>Total Energy Conversion</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_from_node('Power Plants', resource, year) - data.resource_into_node('Power Plants', resource, year) + data.resource_from_node('Refineries', resource, year) - data.resource_into_node('Refineries', resource, year) + data.resource_from_node('Other transformation', resource, year) - data.resource_into_node('Other transformation', resource, year) - data.resource_into_node('Own use', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.resource_from_node('Power Plants', 'Electricity', year) - data.total_into_node('Power Plants', year) + data.total_from_node('Refineries', year) - data.total_into_node('Refineries', year) + data.total_from_node('Other transformation', year) - data.total_into_node('Other transformation', year) - data.total_into_node('Own use', year))}</td>
    </tr> 
    <tr>
      <th>Power Plants</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_from_node('Power Plants', resource, year) - data.resource_into_node('Power Plants', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.resource_from_node('Power Plants', 'Electricity', year) - data.total_into_node('Power Plants', year))}</td>
    </tr> 
    <tr>
      <th>Refineries</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_from_node('Refineries', resource, year) - data.resource_into_node('Refineries', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_from_node('Refineries', year) - data.total_into_node('Refineries', year))}</td>
    </tr> 
    <tr>
      <th>Other Transformations</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_from_node('Other transformation', resource, year) - data.resource_into_node('Other transformation', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_from_node('Other transformation', year) - data.total_into_node('Other transformation', year))}</td>
    </tr> 
    <tr>
      <th>Use in Energy Production</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_from_node('Own use', resource, year) - data.resource_into_node('Own use', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_from_node('Own use', year) - data.total_into_node('Own use', year))}</td>
    </tr> 

    <tr>
      <th>Final Consumption</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_into_sector('Industry', resource, year) + data.resource_into_sector('Transport', resource, year) + data.resource_into_sector('Other', resource, year) + data.resource_into_sector('Non-energy use', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_into_sector('Industry', year) + data.total_into_sector('Transport', year) + data.total_into_sector('Other', year) + data.total_into_sector('Non-energy use', year))}</td>
    </tr> 
    <tr>
      <th>Industry</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_into_sector('Industry', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_into_sector('Industry', year))}</td>
    </tr> 
      <th> - Iron and Steel</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_into_node('Iron and steel', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_into_node('Iron and steel', year))}</td>
    </tr> 
    <tr>
      <th> - Chemical and Petrochemical</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_into_node('Chemical and petrochemical', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_into_node('Chemical and petrochemical', year))}</td>
    </tr> 
    <tr>
      <th> - Non-ferrous Metals</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_into_node('Non-ferrous metals', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_into_node('Non-ferrous metals', year))}</td>
    </tr>
    <tr>
      <th> - Wood and Wood Products</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_into_node('Wood and wood products', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_into_node('Wood and wood products', year))}</td>
    </tr> 
    <tr>
      <th> - Other</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_into_sector('Industry', resource, year) - data.resource_into_node('Iron and steel', resource, year) - data.resource_into_node('Chemical and petrochemical', resource, year) - data.resource_into_node('Non-ferrous metals', resource, year) - data.resource_into_node('Wood and wood products', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_into_sector('Industry', year) - data.total_into_node('Iron and steel', year) - data.total_into_node('Chemical and petrochemical', year) - data.total_into_node('Non-ferrous metals', year) - data.total_into_node('Wood and wood products', year))}</td>
    </tr> 
    <tr>
      <th>Transportation</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_into_sector('Transport', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_into_sector('Transport', year))}</td>
    </tr> 
    <tr>
      <th> - Road</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_into_node('Road', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_into_node('Road', year))}</td>
    </tr> 
    <tr>
      <th> - Rail</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_into_node('Rail', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_into_node('Rail', year))}</td>
    </tr> 
    <tr>
      <th> - Air</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_into_node('Domestic aviation', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_into_node('Domestic aviation', year))}</td>
    </tr>
    <tr>
      <th> - Marine</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_into_node('Domestic navigation', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_into_node('Domestic navigation', year))}</td>
    </tr>
    <tr>
      <th> - Other</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_into_sector('Transport', resource, year) - data.resource_into_node('Road', resource, year) - data.resource_into_node('Rail', resource, year) - data.resource_into_node('Domestic aviation', resource, year) - data.resource_into_node('Domestic navigation', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_into_sector('Transport', year) - data.total_into_node('Road', year) - data.total_into_node('Rail', year) - data.total_into_node('Domestic aviation', year) - data.total_into_node('Domestic navigation', year))}</td>
    </tr> 
    <tr>
      <th>Other</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_into_sector('Other', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_into_sector('Other', year))}</td>
    </tr> 
    <tr>
      <th> - Residential</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_into_node('Residential', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_into_node('Residential', year))}</td>
    </tr>
    <tr>
      <th> - Commerce and Public Services</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_into_node('Commerce and public services', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_into_node('Commerce and public services', year))}</td>
    </tr>
    <tr>
      <th> - Agriculture / Forestry</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_into_node('Agriculture/forestry', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_into_node('Agriculture/forestry', year))}</td>
    </tr>
    <tr>
      <th> - Fishing</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_into_node('Fishing', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_into_node('Fishing', year))}</td>
    </tr>
    <tr>
      <th> - Other</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_into_sector('Other', resource, year) - data.resource_into_node('Residential', resource, year) - data.resource_into_node('Commerce and public services', resource, year) - data.resource_into_node('Agriculture/forestry', resource, year) - data.resource_into_node('Fishing', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_into_sector('Other', year) - data.total_into_node('Residential', year) - data.total_into_node('Commerce and public services', year) - data.total_into_node('Agriculture/forestry', year) - data.total_into_node('Fishing', year))}</td>
    </tr>
    <tr>
      <th>Non-energy use</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_into_sector('Non-energy use', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_into_sector('Non-energy use', year))}</td>
    </tr> 
    <tr>
      <th>Statistical Differences</th>
      % for resource in data.resources():
      <td>${"{:.1f}".format(data.resource_from_node('Statistical Differences', resource, year) - data.resource_into_node('Statistical Differences', resource, year))}</td>
      % endfor
      <td>${"{:.1f}".format(data.total_from_node('Statistical Differences', year) - data.total_into_node('Statistical Differences', year))}</td>
    </tr> 

  </tbody>
</table>
